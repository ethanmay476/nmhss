"0","library(knitr)"
"0","library(dplyr)"
"0","library(tidyr)"
"0",""
"0","# Assuming your dataset is named 'data'"
"0","# If it's not, change the line below to load your dataset"
"0","load(""~/GitHub/nmhss/data/data_start_2014_filter.rda"")"
"0",""
"0",""
"0",""
"0",""
"0",""
"0",""
"0","is_binary_factor <- function(column) {"
"0","  if (is.factor(column)) {"
"0","    return(all(levels(column) %in% c(""0"", ""1"")))"
"0","  } else {"
"0","    return(TRUE) # Keep non-factor columns"
"0","  }"
"0","}"
"0",""
"0","# Use sapply to check each column, then filter with select"
"0","binary_data <- data_start_2014_filter %>% select(which(sapply(., is_binary_factor)))"
"0","data <- binary_data"
"0","# Function to generate a comparison table for two variables using pivot_wider"
"0","generate_table <- function(data, var1, var2) {"
"0","  data %>%"
"0","    count(!!sym(var1), !!sym(var2)) %>% "
"0","    pivot_wider(names_from = !!sym(var2), values_from = n, values_fill = list(n = 0)) %>%"
"0","    kable(caption = paste(""Comparison of"", var1, ""and"", var2)) %>%"
"0","    print()"
"0","}"
"0",""
"0","# Loop through each variable, comparing it with every other variable"
"0","for (var1 in names(data)) {"
"0","  for (var2 in names(data)) {"
"0","    if (var1 != var2) {"
"0","      generate_table(data, var1, var2)"
"0","      cat(""\\pagebreak\n"")"
"0","    }"
"0","  }"
"0","}"
